# ========================================
# Application Configuration
# ========================================
APP_NAME="Arconte"
APP_ENV=production
APP_KEY=  # Generar con: php artisan key:generate
APP_DEBUG=false
APP_URL=http://localhost:8000
APP_FRONTEND_URL=http://localhost:3000

LOG_CHANNEL=stack
LOG_LEVEL=info

# ========================================
# Database Configuration
# ========================================
# IMPORTANTE: PostgreSQL es requerido (no usar MySQL)
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=arconte
DB_USERNAME=arconte
DB_PASSWORD=arconte_secure_2025  # Cambiar en producción

# ========================================
# Session & Authentication (CRÍTICO)
# ========================================
# ⚠️ NO CAMBIAR session.driver sin actualizar RUNBOOK_LOGIN_REDIRECT.md
SESSION_DRIVER=database  # Debe ser 'database' para Sanctum
SESSION_LIFETIME=120
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax  # Debe ser 'lax' para autenticación cross-domain
SESSION_SECURE_COOKIE=false  # true en HTTPS
SESSION_DOMAIN=localhost  # En producción: .tudominio.com

# ⚠️ CRÍTICO: Lista de dominios permitidos para autenticación stateful
# Formato: dominio:puerto,dominio:puerto (sin espacios)
SANCTUM_STATEFUL_DOMAINS=localhost:3000,127.0.0.1:3000

# ========================================
# Cache & Queue
# ========================================
CACHE_STORE=file
QUEUE_CONNECTION=database  # Debe ser 'database' para queue:work

# ========================================
# Redis (Opcional)
# ========================================
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1

# ========================================
# OCR & AI
# ========================================
OCR_ENABLED=false  # true para habilitar OCR de documentos

# Google Gemini API (para AI Assistant)
GEMINI_API_KEY=  # Obtener en: https://makersuite.google.com/app/apikey

# ========================================
# Email Configuration
# ========================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=tu-email@gmail.com
MAIL_PASSWORD=  # Contraseña de aplicación de Gmail
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@arconte.com
MAIL_FROM_NAME="${APP_NAME}"

# ========================================
# Ingest Service (Python)
# ========================================
INGEST_BASE_URL=http://127.0.0.1:8001
INGEST_API_KEY=5d95c7ed99d196f47c374cc04c7cf77c2235a29b67dc85baa573f3bb815024b1  # Cambiar en producción

# ========================================
# ePayco Payment Gateway
# ========================================
# Obtener en: https://dashboard.epayco.co
EPAYCO_PUBLIC_KEY=
EPAYCO_PRIVATE_KEY=
EPAYCO_P_CUST_ID_CLIENTE=
EPAYCO_CUSTOMER_ID=
EPAYCO_TEST_MODE=true  # false en producción

# URLs de callback (IMPORTANTE: Actualizar en producción)
EPAYCO_URL_CONFIRMATION=${APP_URL}/api/webhooks/epayco/confirmation
EPAYCO_URL_RESPONSE=${APP_FRONTEND_URL}/checkout/response

# ========================================
# CORS Configuration
# ========================================
# Ver: config/cors.php
# allowed_origins debe incluir APP_FRONTEND_URL
# supports_credentials debe ser true

# ========================================
# Monitoring & Alerting (Opcional)
# ========================================
# Slack webhook para alertas críticas
SLACK_WEBHOOK_URL=

# Email para alertas operativas
ALERT_EMAIL=admin@arconte.com

# ========================================
# Backups
# ========================================
BACKUP_PATH=/path/to/backups
BACKUP_RETENTION_DAYS=30

# ========================================
# Health Checks
# ========================================
# Endpoint: /api/health/external
# Esperado: {"ok":false,"rama_ok":false,"queue_ok":true,"queue_size":0,"db_ok":true}
# rama_ok=false es esperado si Rama Judicial no está disponible

# ========================================
# Production Checklist
# ========================================
# Antes de deploy:
# [ ] APP_DEBUG=false
# [ ] APP_ENV=production
# [ ] SESSION_SECURE_COOKIE=true (si usas HTTPS)
# [ ] Cambiar todas las contraseñas por defecto
# [ ] Cambiar INGEST_API_KEY
# [ ] EPAYCO_TEST_MODE=false
# [ ] Configurar backups automáticos
# [ ] Configurar alertas (SLACK_WEBHOOK_URL o ALERT_EMAIL)
# [ ] Ejecutar: php artisan config:cache
# [ ] Ejecutar: php artisan route:cache
# [ ] Ejecutar: php artisan view:cache
# [ ] Verificar: ./scripts/daily-check.sh --with-e2e

# ========================================
# Referencias
# ========================================
# Docs: docs/RUNBOOK_LOGIN_REDIRECT.md
# Docs: docs/CHECKLIST_OPERATIVO.md
# Docs: docs/SETUP_TESTING_AUTOMATION.md
